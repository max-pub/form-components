
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../core-transition/core-transition.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../core-icons/core-icons.html">


<polymer-element name="search-popup" attributes="name,search">
    <template>
        <paper-dialog id='popup' backdrop='true' transition="core-transition-center">
            <style no-shim>
                *{
                    font-family: Roboto;
                    font-weight: 300;
                }
                :host /deep/ #scroller{
                    padding: 0px;
                    border: 3px solid #333;
                    background:white;
                }
                #header{
                    background: #333;
                    width: 100%;
                    padding:10px;
                }
                #header paper-icon-button{
                    color:white;
                    padding:0;
                }
                #header .icon{
                    width: 32px;
                    color:white;
                }
                #search{
                    color: white;
                }
                #search::-webkit-input-placeholder{
                    color: white;
                    font-style: italic;
                    font-weight: 100 !important;
                }
            </style>

            <table id='header'>
                <tr>
                    <td class='icon'>
                        <core-icon icon="search"></core-icon>
                    </td>
                    <td class='search'>
                        <input id='search' is='core-input' on-keyup='{{startTimer}}' placeholder="{{name}}" flex value='{{searchValue}}' autofocus='true'>
                    </td>
                    <td class='icon'>
                        <paper-icon-button icon="close"  core-overlay-toggle></paper-icon-button>
                    </td>
                </tr>
            </table>

            <template is='auto-binding'>
                <content></content>
            </template>

        </paper-dialog>
    </template>

    <script>
        Polymer({
            ready:function(){
                this.minLength = 4;
                this.delay = 500;
            },
            toggle: function(){
                this.$.popup.toggle();
            },
            startTimer: function(){
                var query = this.searchValue;
                if(query.length<this.minlength) return;

                this.job('job1', function(){
                    this.search = query;
                },this.delay);
            }
        });
    </script>
</polymer-element>

