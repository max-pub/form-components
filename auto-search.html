    <link rel="import" href="../core-field/core-field.html">
    <link rel="import" href="../core-input/core-input.html">
    <link href='bower_components/roboto-fontface/roboto-fontface.css' rel='stylesheet' type='text/css'>

    <polymer-element name="auto-search" attributes="currentValue,value,minlength,delay,callback">
        <template>
            <style>
/*                ::-webkit-input-placeholder{color: silver;}*/
                core-field /deep/ #cancel{color:silver;}
                *{
                    font-family: Roboto;
                    font-weight: 300;
                }
            </style>
            <core-field>
                <core-icon icon="search"></core-icon>
                <input id='search' is='core-input' on-keyup='{{startTimer}}' placeholder="Search..." flex value='{{currentValue}}' autofocus='true'>
                <core-icon id='cancel' icon="cancel" hidden?='{{!currentValue.length}}' on-tap='{{clearValue}}'></core-icon>
            </core-field>
<!--
            <paper-input-decorator  label="Search">
                <input is='core-input' id='search' type='search' on-keyup='{{startTimer}}'/>
            </paper-input-decorator>
-->
        </template>
        <script>
        Polymer({
            delay: 500,
            callback: 0,
            minlength: 4,

            startTimer: function(){
//                var el = this.$.search;
//                var query = el.value;
                var query = this.currentValue;
                if(query.length<this.minlength) return;

                this.job('job1', function(){
                    this.value = query;
                    if(this.callback) this.callback(query);
                },this.delay);
            },

            clearValue: function(){
                this.currentValue='';
                this.value='';
                this.$.search.focus();
            }
        });
        </script>
    </polymer-element>
