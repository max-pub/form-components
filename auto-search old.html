    <link rel="import" href="../core-field/core-field.html">
    <link rel="import" href="../core-input/core-input.html">


    <polymer-element name="auto-search" attributes="liveValue,value,minlength,delay,clearButton">
        <template>
            <style>
/*                ::-webkit-input-placeholder{color: silver;}*/
                core-field /deep/ #cancel{color:silver;}
                *{
                    font-family: Roboto;
                    font-weight: 300;
                }
            </style>
            <core-field>
                <core-icon icon="search"></core-icon>
                <input id='search' is='core-input' on-keyup='{{startTimer}}' placeholder="Search..." flex value='{{liveValue}}' autofocus='true'>
                <template if='{{clearButton==true}}'>
                    <core-icon id='cancel' icon="cancel" hidden?='{{!liveValue.length}}' on-tap='{{clearValue}}'></core-icon>
                </template>
            </core-field>
        </template>
        <script>
        Polymer({
            ready:function(){
                if(!this.delay) this.delay = 500;
                if(!this.minlength) this.minlength = 4;
                if(!this.clearButton) this.clearButton = true;
            },

            startTimer: function(){
                var query = this.liveValue;
                if(query.length<this.minlength) return;

                this.job('job1', function(){
                    this.value = query;
                    this.fire('search',query);
                },this.delay);
            },

            clearValue: function(){
                this.liveValue='';
                this.value='';
                this.$.search.focus();
            }
        });
        </script>
    </polymer-element>
